
          window.__NEXT_REGISTER_PAGE('/resources', function() {
            var comp = module.exports=webpackJsonp([4],{279:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r,o,s=n(74),l=a(s),i=n(79),u=a(i),d=n(12),c=a(d),f=n(1),p=a(f),h=n(6),m=a(h),g=n(2),v=a(g),y=n(3),_=a(y),I=n(0),b=a(I),k=n(15),x=n(22),E=a(x),C=n(23),M=n(14),S=n(280),$=a(S),j=(k.Card.Meta,(r=(0,M.inject)("store"))(o=(0,M.observer)(o=function(e){function t(e){(0,p.default)(this,t);var n=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return n.onChange=function(e){n.getData(e)},n.handleChcekChange=function(e){console.log("checked = ",e),n.props.store.getVideoID(e)},n.state={data:null},n}return(0,_.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.getData(1)}},{key:"getData",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(l.default.mark(function e(t){var n,a,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={page:t,pageSize:10,shopId:this.props.store.shopID,type:"VIDEO"},a=new C.GraphQLClient(E.default,{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}),e.next=4,a.request("\nquery ($page: Int, $pageSize: Int, $shopId: ID!, $type: MediaType) {\n    shopMedias(page:$page, pageSize:$pageSize, shopId:$shopId, type:$type){\n    totalEntries\n    totalPages\n    pageNumber\n    pageSize\n    entries{\n      id\n      name\n      url\n      type\n    }\n  }\n}\n",n);case 4:r=e.sent,this.setState({data:r.shopMedias});case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"confirm",value:function(e){var t=this;new C.GraphQLClient(E.default,{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}).request("\n    mutation ($id:Int!, $shopId: Int!) {\n        deleteMedia(id:$id, shopId:$shopId){\n            id\n            url\n    }\n}\n",{id:e,shopId:this.props.store.shopID}).then(function(e){e.errors||(k.message.success("删除成功！"),t.getData(1))})}},{key:"cancel",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.data&&this.state.data.entries.map(function(t){return b.default.createElement(k.Card,{key:t.id,hoverable:!0,style:{width:240,margin:15},cover:b.default.createElement("video",{alt:"example",src:t.url,controls:"control"}),extra:b.default.createElement("div",null,b.default.createElement(k.Checkbox,{onChange:function(){e.handleChcekChange(t.id)},checked:e.props.store.isChecked,value:t.id},"选中"),b.default.createElement(k.Popconfirm,{title:"确认要删除吗?",onConfirm:function(){e.confirm(parseInt(t.id))},onCancel:e.cancel,okText:"Yes",cancelText:"No"},b.default.createElement("a",{href:"#"},"删除")))})});return b.default.createElement("div",null,b.default.createElement($.default,{refreshData:function(){e.getData(1)}}),b.default.createElement(k.Checkbox.Group,{onChange:this.handleChcekChange,style:{display:"inline"}},b.default.createElement("div",{style:{marginTop:40,display:"flex",justifyContent:"flex-start",alignContent:"space-between",flexWrap:"wrap"}},t)),b.default.createElement(k.Pagination,{defaultCurrent:1,onChange:this.onChange,current:this.state.data?this.state.data.pageNumber:1,total:this.state.data?this.state.data.totalEntries:1,style:{marginLeft:"80%",marginTop:"10px"}}))}}]),t}(b.default.Component))||o)||o);t.default=j},280:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=n(45);!function(e){e&&e.__esModule}(r);Object.defineProperty(t,"__esModule",{value:!0});var o,s,l=n(12),i=a(l),u=n(1),d=a(u),c=n(6),f=a(c),p=n(2),h=a(p),m=n(3),g=a(m),v=n(0),y=a(v),_=n(15),I=n(14),b=n(46),k=a(b),x=n(22),E=a(x),C=n(23),M=(_.Radio.Group,(o=(0,I.inject)("store"))(s=(0,I.observer)(s=function(e){function t(e){(0,d.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.onChange=function(e){console.log("radio checked",e.target.value),n.setState({value:e.target.value})},n.state={fileList:[],uploading:!1,fileUrls:[],upload_confirming:!1,data:{}},n}return(0,g.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.getOSSPolicy(),this.getUploaded()}},{key:"getOSSPolicy",value:function(){var e=this;new C.GraphQLClient(E.default,{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}).request("\n      query ($label: String, $type: String!){\n        ossPolicy(label: $label, type: $type){\n            dir\n            accessid\n            policy\n            signature\n            host\n            filename\n            }\n        }\n      ",{label:"user",type:"video"}).then(function(t){console.log("oss",t),e.setState({data:t.ossPolicy})})}},{key:"get_suffix",value:function(e){var t=e.lastIndexOf("."),n="";return-1!==t&&(n=e.substring(t)),n}},{key:"set_upload_param",value:function(e,t,n){var a={key:this.state.data.dir+"/"+k.default.uuid(8,10)+this.get_suffix(t),policy:this.state.data.policy,OSSAccessKeyId:this.state.data.accessid,success_action_status:"200",signature:this.state.data.signature};e.setOption({url:this.state.data.host,multipart_params:a}),e.start()}},{key:"getUploaded",value:function(){var e=this,t=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"selectfiles2",container:document.getElementById("container"),flash_swf_url:"../../utils/Moxie.swf",silverlight_xap_url:"../../utils/Moxie.xap",filters:{max_file_size:"50mb",mime_types:[{title:"Video files",extensions:"mp4, mov, m4v, flv, x-flv, mkv, wmv, avi, rmvb, 3gp"}]},init:{PostInit:function(){document.getElementById("ossfile2").innerHTML="",document.getElementById("postfiles2").onclick=function(){return e.set_upload_param(t,"",!1),!1}},FilesAdded:function(e,t){plupload.each(t,function(e){document.getElementById("ossfile2").innerHTML+="<div id="+e.id+">\n                "+e.name+" "+plupload.formatSize(e.size)+"\n                <b></b>\n            </div>"})},BeforeUpload:function(t,n){e.set_upload_param(t,n.name,!0)},UploadProgress:function(e,t){document.getElementById(t.id).getElementsByTagName("b")[0].innerHTML="<span>"+t.percent+"% 完成上传</span>"},FileUploaded:function(t,n,a){if(200==a.status){var r=new C.GraphQLClient(E.default,{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}),o=parseInt(e.props.store.shopID),s=e.state.data.host+"/"+n._options.multipart_params.key;r.request("\n  mutation ($shopId: Int!, $type: MediaType!, $url: String!) {\n    createMedia(shopId:$shopId, type:$type, url: $url){\n      id\n    }\n  }\n",{shopId:o,type:"VIDEO",url:s}).then(function(t){var n=t.createMedia.id;e.props.store.getUrlIDs(parseInt(n)),_.message.success("上传成功！"),document.getElementById("ossfile2").innerHTML="",e.props.refreshData()})}},Error:function(e,t){_.message.error("出错了！"+t.response)}}});t.init()}},{key:"render",value:function(){return y.default.createElement("div",{className:"jsx-908210476"},y.default.createElement("div",{id:"ossfile2",className:"jsx-908210476"}),y.default.createElement("br",{className:"jsx-908210476"}),y.default.createElement("div",{id:"container",className:"jsx-908210476"},y.default.createElement("a",{id:"selectfiles2",href:"javascript:void(0);",style:{marginRight:"10px"},className:"jsx-908210476 btn"},"选择文件"),y.default.createElement("a",{id:"postfiles2",href:"javascript:void(0);",className:"jsx-908210476 btn"},"开始上传")),y.default.createElement("style",{jsx:"true"},"\n          \t.btn{\n            color: #fff;\n            background-color: #1890FF;\n            border-color: #2e6da4; \n            display: inline-block;\n            padding: 6px 12px;\n            margin-bottom: 0;\n            font-size: 14px;\n            font-weight: 400;\n            line-height: 1.42857143;\n            text-align: center;\n            white-space: nowrap;\n            text-decoration: none;\n            vertical-align: middle;\n            -ms-touch-action: manipulation;\n            touch-action: manipulation;\n            cursor: pointer;\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            background-image: none;\n            border: 1px solid transparent;\n            border-radius: 4px;\n            }\n            a.btn:hover{\n                background-color: #40A9FF;\n            }\n          "))}}]),t}(y.default.Component))||s)||s);t.default=M},46:function(e,t,n){"use strict";e.exports={uuid:function(e,t){var n,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];if(t=t||a.length,e)for(n=0;n<e;n++)r[n]=a[0|Math.random()*t];else{var o;for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",n=0;n<36;n++)r[n]||(o=0|16*Math.random(),r[n]=a[19==n?3&o|8:o])}return r.join("")}}},846:function(e,t,n){e.exports=n(847)},847:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(12),o=a(r),s=n(1),l=a(s),i=n(2),u=a(i),d=n(6),c=a(d),f=n(3),p=a(f),h=n(0),m=a(h),g=n(15),v=n(61),y=a(v),_=n(848),I=a(_),b=n(851),k=a(b),x=n(26),E=a(x),C=n(14),M=n(62),S=g.Tabs.TabPane,$=function(e){function t(e){(0,l.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.store=(0,M.initStore)(e.isServer),n}return(0,p.default)(t,e),(0,c.default)(t,null,[{key:"getInitialProps",value:function(e){var t=e.req,n=!!t;(0,M.initStore)(n);return{isServer:n}}}]),(0,c.default)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("accessToken")&&null!==localStorage.getItem("accessToken")?null===this.store.shopID&&E.default.push("/shops"):E.default.push("/login")}},{key:"callback",value:function(e){console.log(e)}},{key:"render",value:function(){return m.default.createElement(C.Provider,{store:this.store},m.default.createElement(y.default,null,m.default.createElement(g.Tabs,{onChange:this.callback,type:"card"},m.default.createElement(S,{tab:"图片文件",key:"1"},m.default.createElement(I.default,null)),m.default.createElement(S,{tab:"视频文件",key:"2"},m.default.createElement(k.default,null)))))}}]),t}(m.default.Component);t.default=$},848:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r,o,s=n(12),l=a(s),i=n(1),u=a(i),d=n(6),c=a(d),f=n(2),p=a(f),h=n(3),m=a(h),g=n(0),v=a(g),y=n(15),_=n(22),I=(a(_),n(23),n(14)),b=n(849),k=a(b),x=(y.Card.Meta,y.Form.Item,(r=(0,I.inject)("store"))(o=(0,I.observer)(o=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return v.default.createElement("div",null,v.default.createElement(k.default,null))}}]),t}(v.default.Component))||o)||o);t.default=x},849:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r,o,s=n(12),l=a(s),i=n(1),u=a(i),d=n(6),c=a(d),f=n(2),p=a(f),h=n(3),m=a(h),g=n(0),v=a(g),y=n(15),_=n(22),I=a(_),b=n(23),k=n(14),x=n(850),E=a(x),C=(y.Card.Meta,"\nquery ($page: Int, $pageSize: Int, $shopId: ID!, $type: MediaType) {\n    shopMedias(page:$page, pageSize:$pageSize, shopId:$shopId, type:$type){\n    totalEntries\n    totalPages\n    pageNumber\n    pageSize\n    entries{\n      id\n      name\n      url\n      type\n    }\n  }\n}\n"),M=(r=(0,k.inject)("store"))(o=(0,k.observer)(o=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return n.getData=function(e){var t={page:e,pageSize:10,shopId:n.props.store.shopID,type:"PIC"};new b.GraphQLClient(I.default,{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}).request(C,t).then(function(e){console.log("res",e),n.setState({data:e.shopMedias})})},n.onChange=function(e){n.getData(e)},n.state={data:null},n}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.getData(1)}},{key:"confirm",value:function(e){var t=this;new b.GraphQLClient(I.default,{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}).request("\n    mutation ($id:Int!, $shopId: Int!) {\n        deleteMedia(id:$id, shopId:$shopId){\n            id\n            url\n    }\n}\n",{id:e,shopId:this.props.store.shopID}).then(function(e){e.errors||(y.message.success("删除成功！"),t.getData(1))})}},{key:"cancel",value:function(e){console.log(e),y.message.error("Click on No")}},{key:"render",value:function(){var e=this,t=this.state.data&&this.state.data.entries.map(function(t){return v.default.createElement(y.Card,{key:t.id,hoverable:!0,style:{width:200,margin:15},cover:v.default.createElement("img",{alt:"example",style:{width:200,height:200,textAlign:"center"},src:t.url}),extra:v.default.createElement(y.Popconfirm,{title:"确认要删除吗?",onConfirm:function(){e.confirm(parseInt(t.id))},onCancel:e.cancel,okText:"确认",cancelText:"取消"},v.default.createElement("a",{href:"#"},"删除"))})});return v.default.createElement("div",null,v.default.createElement(E.default,{refreshData:function(){e.getData(1)}}),v.default.createElement("div",{style:{marginTop:40,display:"flex",justifyContent:"flex-start",alignContent:"space-between",flexWrap:"wrap"}},t),this.state.data&&0!==this.state.data.totalEntries&&v.default.createElement(y.Pagination,{defaultCurrent:1,current:this.state.data.pageNumber,onChange:this.onChange,total:this.state.data?this.state.data.totalEntries:1,style:{marginLeft:"80%",marginTop:"10px"}}))}}]),t}(v.default.Component))||o)||o;t.default=M},850:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=n(45);!function(e){e&&e.__esModule}(r);Object.defineProperty(t,"__esModule",{value:!0});var o,s,l=n(12),i=a(l),u=n(1),d=a(u),c=n(6),f=a(c),p=n(2),h=a(p),m=n(3),g=a(m),v=n(0),y=a(v),_=n(15),I=n(14),b=n(46),k=a(b),x=n(22),E=a(x),C=n(23),M=(_.Radio.Group,(o=(0,I.inject)("store"))(s=(0,I.observer)(s=function(e){function t(e){(0,d.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={fileList:[],uploading:!1,fileUrls:[],upload_confirming:!1,data:{}},n}return(0,g.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.getOSSPolicy(),this.getUploaded()}},{key:"getOSSPolicy",value:function(){var e=this;new C.GraphQLClient(E.default,{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}).request("\n      query ($label: String, $type: String!){\n        ossPolicy(label: $label, type: $type){\n            dir\n            accessid\n            policy\n            signature\n            host\n            filename\n            }\n        }\n      ",{label:"user",type:"pic"}).then(function(t){console.log("oss",t),e.setState({data:t.ossPolicy})})}},{key:"get_suffix",value:function(e){var t=e.lastIndexOf("."),n="";return-1!==t&&(n=e.substring(t)),n}},{key:"set_upload_param",value:function(e,t,n){var a={key:this.state.data.dir+"/"+k.default.uuid(8,10)+this.get_suffix(t),policy:this.state.data.policy,OSSAccessKeyId:this.state.data.accessid,success_action_status:"200",signature:this.state.data.signature};e.setOption({url:this.state.data.host,multipart_params:a}),e.start()}},{key:"getUploaded",value:function(){var e=this,t=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"selectfiles",container:document.getElementById("container"),flash_swf_url:"../../utils/Moxie.swf",silverlight_xap_url:"../../utils/Moxie.xap",filters:{max_file_size:"5mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png,bmp"}]},init:{PostInit:function(){document.getElementById("ossfile").innerHTML="",document.getElementById("postfiles").onclick=function(){return e.set_upload_param(t,"",!1),!1}},FilesAdded:function(e,t){plupload.each(t,function(e){document.getElementById("ossfile").innerHTML+="<div id="+e.id+">\n                "+e.name+" "+plupload.formatSize(e.size)+"\n                <b></b>\n            </div>"})},BeforeUpload:function(t,n){e.set_upload_param(t,n.name,!0)},UploadProgress:function(e,t){document.getElementById(t.id).getElementsByTagName("b")[0].innerHTML="<span>"+t.percent+"% 完成上传</span>"},FileUploaded:function(t,n,a){if(200==a.status){var r=new C.GraphQLClient(E.default,{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}),o=parseInt(e.props.store.shopID),s=e.state.data.host+"/"+n._options.multipart_params.key;r.request("\n  mutation ($shopId: Int!, $type: MediaType!, $url: String!) {\n    createMedia(shopId:$shopId, type:$type, url: $url){\n      id\n    }\n  }\n",{shopId:o,type:"PIC",url:s}).then(function(t){var n=t.createMedia.id;e.props.store.getUrlIDs(parseInt(n)),_.message.success("上传成功"),document.getElementById("ossfile").innerHTML="",e.props.refreshData()})}},Error:function(e,t){_.message.error("出错了！"+t.response)}}});t.init()}},{key:"render",value:function(){return y.default.createElement("div",{className:"jsx-908210476"},y.default.createElement("div",{id:"ossfile",className:"jsx-908210476"}),y.default.createElement("br",{className:"jsx-908210476"}),y.default.createElement("div",{id:"container",className:"jsx-908210476"},y.default.createElement("a",{id:"selectfiles",href:"javascript:void(0);",style:{marginRight:"10px"},className:"jsx-908210476 btn"},"选择文件"),y.default.createElement("a",{id:"postfiles",href:"javascript:void(0);",className:"jsx-908210476 btn"},"开始上传")),y.default.createElement("style",{jsx:"true"},"\n          \t.btn{\n            color: #fff;\n            background-color: #1890FF;\n            border-color: #2e6da4; \n            display: inline-block;\n            padding: 6px 12px;\n            margin-bottom: 0;\n            font-size: 14px;\n            font-weight: 400;\n            line-height: 1.42857143;\n            text-align: center;\n            white-space: nowrap;\n            text-decoration: none;\n            vertical-align: middle;\n            -ms-touch-action: manipulation;\n            touch-action: manipulation;\n            cursor: pointer;\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            background-image: none;\n            border: 1px solid transparent;\n            border-radius: 4px;\n            }\n            a.btn:hover{\n                background-color: #40A9FF;\n            }\n          "))}}]),t}(y.default.Component))||s)||s);t.default=M},851:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r,o,s=n(12),l=a(s),i=n(1),u=a(i),d=n(6),c=a(d),f=n(2),p=a(f),h=n(3),m=a(h),g=n(0),v=a(g),y=n(15),_=n(22),I=(a(_),n(23),n(14)),b=n(279),k=a(b),x=(y.Card.Meta,y.Form.Item,(r=(0,I.inject)("store"))(o=(0,I.observer)(o=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return v.default.createElement("div",null,v.default.createElement(k.default,null))}}]),t}(v.default.Component))||o)||o);t.default=x}},[846]);
            return { page: comp.default }
          })
        