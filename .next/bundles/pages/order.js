
          window.__NEXT_REGISTER_PAGE('/order', function() {
            var comp = module.exports=webpackJsonp([9],{46:function(e,t,a){"use strict";e.exports={uuid:function(e,t){var a,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),l=[];if(t=t||n.length,e)for(a=0;a<e;a++)l[a]=n[0|Math.random()*t];else{var r;for(l[8]=l[13]=l[18]=l[23]="-",l[14]="4",a=0;a<36;a++)l[a]||(r=0|16*Math.random(),l[a]=n[19==a?3&r|8:r])}return l.join("")}}},841:function(e,t,a){e.exports=a(842)},842:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(12),r=n(l),s=a(1),u=n(s),o=a(2),i=n(o),d=a(6),c=n(d),f=a(3),m=n(f),p=a(0),h=n(p),v=a(61),g=n(v),y=a(843),E=n(y),S=a(14),k=a(62),I=a(26),x=n(I),N=function(e){function t(e){(0,u.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.store=(0,k.initStore)(e.isServer),a}return(0,m.default)(t,e),(0,c.default)(t,null,[{key:"getInitialProps",value:function(e){var t=e.req,a=!!t;(0,k.initStore)(a);return{isServer:a}}}]),(0,c.default)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("accessToken")&&null!==localStorage.getItem("accessToken")?null===this.store.shopID&&x.default.push("/shops"):x.default.push("/login")}},{key:"render",value:function(){return h.default.createElement(S.Provider,{store:this.store},h.default.createElement(g.default,null,h.default.createElement(E.default,null)))}}]),t}(h.default.Component);t.default=N},843:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var l=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(l);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,o=a(10),i=n(o),d=a(12),c=n(d),f=a(1),m=n(f),p=a(6),h=n(p),v=a(2),g=n(v),y=a(3),E=n(y),S=a(15),k=a(22),I=n(k),x=a(23),N=a(14),C=a(26),T=n(C),$=a(7),_=n($),b=a(46),D=n(b),M=S.Radio.Group,q=S.Select.Option,L="\n    query ($id: Int!, $page: Int, $pageSize: Int, $startTimestamp: Int, $endTimestamp: Int) {\n        shopTradesList(endTimestamp:$endTimestamp, id:$id, page:$page,pageSize:$pageSize,startTimestamp:$startTimestamp ){\n            totalResults\n            trades{\n                createdAt\n                money\n                orderNo\n                phone\n                state\n                items {\n                    num\n                    price\n                    title\n                }\n            }\n        }\n    }",O="\n    mutation ($isNoExpress: Int!, $outSid: String, $outStype: String, $tid: String!) {\n            confirmSendProduct(isNoExpress: $isNoExpress, outSid: $outSid, outStype: $outStype, tid: $tid ){\n                status\n        }\n    }",z=(s=(0,N.inject)("store"))(u=(0,N.observer)(u=function(e){function t(e){(0,m.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.queryOrderData=function(e){var t=new x.GraphQLClient(I.default,{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}),n=parseInt((0,_.default)().format("X")),l=parseInt((0,_.default)().subtract(1,"quarters").format("X"));t.request(L,{id:a.props.store.shopID,page:e,pageSize:10,startTimestamp:l,endTimestamp:n}).then(function(e){e.errors?S.message.error("出错了，请重试！"):(e.shopTradesList.trades.map(function(e){e.key=D.default.uuid(8,10),e.title=e.items[0].title,e.price=e.items[0].price,e.num=e.items[0].num,delete e.items}),a.setState({data:e.shopTradesList}))}).catch(function(e){S.message.error(e)})},a.handleOk=function(){var e=new x.GraphQLClient(I.default,{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}});0===a.state.isNoExpress?e.request(O,{isNoExpress:a.state.isNoExpress,tid:a.state.orderNo,outSid:a.state.DeliveryNum,outStype:a.state.deliveryValue.toString()}).then(function(e){e.errors?S.message.error(e.errors[0].message):(S.message.success("发货成功！"),a.setState({visible:!1}))}):e.request(O,{isNoExpress:a.state.isNoExpress,tid:a.state.orderNo}).then(function(e){e.errors?S.message.error(e.errors[0].message):(S.message.success("操作成功！"),a.setState({visible:!1}))})},a.handleCancel=function(e){console.log(e),a.setState({visible:!1})},a.onChange=function(e){console.log("radio checked",e.target.value);var t=parseInt(e.target.value);a.setState({isNoExpress:t})},a.handleChange=function(e){console.log("selected "+e),a.setState({deliveryValue:e})},a.handleClick=function(e){a.setState({orderNo:e,visible:!0})},a.InputDeliveryNum=function(e){console.log("value",e.target.value),a.setState({DeliveryNum:e.target.value})},a.state={data:null,columns:[{title:"订单号",dataIndex:"orderNo",key:"orderNo"},{title:"商品",dataIndex:"title",key:"title"},{title:"单价",dataIndex:"price",key:"price"},{title:"数量",dataIndex:"num",key:"num"},{title:"手机号",dataIndex:"phone",key:"phone"},{title:"下单时间",dataIndex:"createdAt",key:"createdAt"},{title:"订单状态",dataIndex:"state",key:"state",render:function(e,t){return r.default.createElement("div",null,r.default.createElement("p",null,3===e?"待付款":5===e?"已付款":6===e?"已发货":"交易完成"),5===e&&r.default.createElement(S.Button,{type:"primary",onClick:function(){a.handleClick(t.orderNo)}},"发货"))}},{title:"订单总额(元)",dataIndex:"money",key:"money"}],expressList:null,visible:!1,isNoExpress:0,deliveryValue:"",orderNo:"",DeliveryNum:""},a}return(0,E.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=new x.GraphQLClient(I.default,{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}});localStorage.getItem("accessToken")&&null!==localStorage.getItem("accessToken")?null===this.props.store.shopID?T.default.push("/shops"):(this.queryOrderData(1),t.request("\nquery {\n    expressList{\n        id\n        name\n    }\n}").then(function(t){console.log("res",t),e.setState({expressList:t.expressList})})):T.default.push("/login")}},{key:"cancel",value:function(){}},{key:"onChange",value:function(e){this.queryUserData(e)}},{key:"render",value:function(){var e;return r.default.createElement("div",null,r.default.createElement(S.Table,{bordered:!0,dataSource:this.state.data?this.state.data.trades:null,columns:this.state.columns,pagination:!1}),r.default.createElement(S.Modal,{title:"确认发货",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},r.default.createElement("div",null,"发货方式：",r.default.createElement(M,{defaultValue:0,onChange:this.onChange},r.default.createElement(S.Radio,{value:0},"需要物流"),r.default.createElement(S.Radio,{value:1},"无需物流")),r.default.createElement("br",null),r.default.createElement("div",{style:{marginTop:15}},"物流公司：",r.default.createElement(S.Select,(e={defaultValue:"default",style:{width:120}},(0,i.default)(e,"style",{marginRight:15}),(0,i.default)(e,"onChange",this.handleChange),e),r.default.createElement(q,{value:"default",key:"-1"},"请选择物流公司"),r.default.createElement(q,{value:1},"申通快递"),r.default.createElement(q,{value:2},"圆通速递"),r.default.createElement(q,{value:3},"中通快递"),r.default.createElement(q,{value:4},"韵达快递"),r.default.createElement(q,{value:5},"天天快递"),r.default.createElement(q,{value:6},"百世快递"),r.default.createElement(q,{value:7},"顺丰速运"),r.default.createElement(q,{value:8},"邮政快递包裹"),r.default.createElement(q,{value:9},"EMS经济快递"),r.default.createElement(q,{value:10},"EMS")),"运单编号：",r.default.createElement("input",{onChange:this.InputDeliveryNum})))),this.state.data&&0!==this.state.data.totalEntries&&r.default.createElement(S.Pagination,{defaultCurrent:1,onChange:this.onChange,total:this.state.data?this.state.data.totalResults:1,style:{float:"right",marginTop:"10px"}}))}}]),t}(r.default.Component))||u)||u;t.default=z}},[841]);
            return { page: comp.default }
          })
        