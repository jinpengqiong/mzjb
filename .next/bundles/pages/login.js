
          window.__NEXT_REGISTER_PAGE('/login', function() {
            var comp = module.exports=webpackJsonp([10],{837:function(e,t,n){e.exports=n(838)},838:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var l=n(45);!function(e){e&&e.__esModule}(l);Object.defineProperty(t,"__esModule",{value:!0});var o=n(12),r=a(o),u=n(1),s=a(u),c=n(6),d=a(c),i=n(2),f=a(i),m=n(3),p=a(m),g=n(0),h=a(g),v=n(15),E=n(839),y=a(E),b=n(840),_=a(b),x=n(488),S=a(x),k=v.Tabs.TabPane,I=function(e){function t(){var e,n,a,l;(0,s.default)(this,t);for(var o=arguments.length,u=Array(o),c=0;c<o;c++)u[c]=arguments[c];return n=a=(0,f.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(u))),a.state={requesting:!1},l=n,(0,f.default)(a,l)}return(0,p.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return h.default.createElement("div",{id:"container",className:"jsx-1698233613"},h.default.createElement("div",{className:"jsx-1698233613 login"},h.default.createElement("p",{className:"jsx-1698233613"},"拇指聚宝"),h.default.createElement(v.Tabs,{defaultActiveKey:"1"},h.default.createElement(k,{tab:h.default.createElement("span",{className:"jsx-1698233613"},h.default.createElement(v.Icon,{type:"user"}),"账号登录"),key:"1"},h.default.createElement(_.default,null)),h.default.createElement(k,{tab:h.default.createElement("span",{className:"jsx-1698233613"},h.default.createElement(v.Icon,{type:"mobile"}),"手机登录"),key:"2"},h.default.createElement(y.default,null)))),h.default.createElement("style",{jsx:"true"}," ","\n          .login {\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            margin: -150px 0 0 -150px;\n            width: 300px;\n            height: 300px;\n          }\n          \n          .login p {\n            font-family: HiraginoSansGB-W3;\n            font-size: 40px;\n            color: black;\n            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);\n            text-align: center;\n            padding-bottom: 40px;\n          }\n        "),h.default.createElement("style",{jsx:!0,global:"true"},S.default))}}]),t}(h.default.Component);t.default=I},839:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var l=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(l);Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),u=a(r),s=n(1),c=a(s),d=n(6),i=a(d),f=n(2),m=a(f),p=n(3),g=a(p),h=n(15),v=n(26),E=a(v),y=n(23),b=n(22),_=a(b),x=h.Form.Item,S="\n  mutation($phone: String!) {\n    smsCode(phone:$phone){\n      result\n  }\n}",k="\nmutation ($phone:String!, $code: String!) {\n  smsLogin(phone:$phone, code: $code){\n    accessToken\n    user  {\n        id\n        updatedAt\n        accountid\n        nickname\n        phone\n        role\n        mzAccountid\n    }\n  }\n}\n",I=function(e){function t(e){(0,c.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){e||(console.log("Received values of form: ",t),(0,y.request)(_.default,k,{phone:t.phone,code:t.SmsCode}).then(function(e){h.message.success("登录成功！"),console.log("res",e),localStorage.setItem("accessToken",e.smsLogin.accessToken),localStorage.setItem("accountid",e.smsLogin.user.accountid),localStorage.setItem("nickname",e.smsLogin.user.nickname),localStorage.setItem("role",e.smsLogin.user.role),E.default.push("/")}))})},n.countDown=function(){var e=59;n.setState({count:e}),n.interval=setInterval(function(){e-=1,n.setState({count:e}),0===e&&(n.setState({count:!1}),clearInterval(n.interval))},1e3)},n.getSmsCode=function(){var e=n.props.form.getFieldsValue();n.isPoneAvailable(e.phone)?(n.countDown(),(0,y.request)(_.default,S,{phone:e.phone}).then(function(e){"OK"===e.smsCode.result&&h.message.success("验证码发送成功！")})):h.message.error("请输入正确手机号")},n.state={count:!1},n}return(0,g.default)(t,e),(0,i.default)(t,[{key:"isPoneAvailable",value:function(e){return!!/^[1][3,4,5,7,8][0-9]{9}$/.test(e)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.count;return o.default.createElement(h.Form,{onSubmit:this.handleSubmit},o.default.createElement(x,null,e("phone",{rules:[{required:!0,message:"请输入手机号!"}]})(o.default.createElement(h.Input,{prefix:o.default.createElement(h.Icon,{type:"mobile",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"请输入手机号"}))),o.default.createElement(x,null,o.default.createElement(h.Row,{gutter:16},o.default.createElement(h.Col,{span:15},e("SmsCode",{rules:[{required:!0,message:"请输入验证码!"}]})(o.default.createElement(h.Input,{prefix:o.default.createElement(h.Icon,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"请输入验证码"}))),o.default.createElement(h.Col,{span:9},o.default.createElement(h.Button,{disabled:t,onClick:this.getSmsCode},t?t+" s":"获取验证码")))),o.default.createElement(x,null,o.default.createElement(h.Row,null,o.default.createElement(h.Col,{span:24},o.default.createElement(h.Button,{type:"primary",htmlType:"submit",style:{width:"300px"}},"登录")))))}}]),t}(o.default.Component),w=h.Form.create()(I);t.default=w},840:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function l(e){return e&&e.__esModule?e:{default:e}}var o=n(45),r=(a(o),n(0)),u=a(r);Object.defineProperty(t,"__esModule",{value:!0});var s=n(12),c=l(s),d=n(1),i=l(d),f=n(6),m=l(f),p=n(2),g=l(p),h=n(3),v=l(h),E=n(15),y=n(26),b=l(y),_=n(23),x=n(22),S=l(x),k=E.Form.Item,I=function(e){function t(){var e,n,a,l;(0,i.default)(this,t);for(var o=arguments.length,r=Array(o),u=0;u<o;u++)r[u]=arguments[u];return n=a=(0,g.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(r))),a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){console.log("Received values of form: ",t);var n={phone:t.userName,password:t.password};(0,_.request)(S.default,"\n          mutation ($phone:String!, $password: String!) {\n            login(phone:$phone,password:$password){\n              accessToken\n              user  {\n                  id\n                  updatedAt\n                  accountid\n                  nickname\n                  phone\n                  role\n                  mzAccountid\n              }\n            }\n          }\n          ",n).then(function(e){E.message.success("登录成功！"),console.log("res",e),localStorage.setItem("accessToken",e.login.accessToken),localStorage.setItem("accountid",e.login.user.accountid),localStorage.setItem("nickname",e.login.user.nickname),localStorage.setItem("role",e.login.user.role),b.default.push("/")})}})},l=n,(0,g.default)(a,l)}return(0,v.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return u.default.createElement(E.Form,{onSubmit:this.handleSubmit,className:"login-form"},u.default.createElement(k,null,e("userName",{rules:[{required:!0,message:"输入用户名或手机号!"}]})(u.default.createElement(E.Input,{prefix:u.default.createElement(E.Icon,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"输入用户名或手机号"}))),u.default.createElement(k,null,e("password",{rules:[{required:!0,message:"输入密码!"}]})(u.default.createElement(E.Input,{prefix:u.default.createElement(E.Icon,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"输入密码"}))),u.default.createElement(k,null,u.default.createElement(E.Button,{type:"primary",htmlType:"submit",style:{width:"300px"}},"登录")),u.default.createElement("style",{jsx:!0},"\n            .login-form {\n                max-width: 300px;\n            }\n            .login-form-forgot {\n                float: right;\n            }\n            .login-form-button {\n                width: 100%;\n            }\n        "))}}]),t}(u.default.Component),w=E.Form.create()(I);t.default=w}},[837]);
            return { page: comp.default }
          })
        